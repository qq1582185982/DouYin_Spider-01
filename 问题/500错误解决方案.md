# 500 Internal Error 解决方案

## 问题描述
访问前端页面时出现500内部服务器错误。

## 问题原因
1. 在服务端渲染时访问了`window`对象
2. 缺少必要的配置文件和store文件

## 解决步骤

### 已完成的修复：

1. **修复window对象访问问题**
   - 文件：`src/routes/+layout.svelte`
   - 修改：将`window.location.pathname`替换为`$page.url.pathname`
   - 导入：添加了`import { page } from '$app/stores'`

2. **添加缺失的配置文件**
   - `components.json` - shadcn/ui配置
   - `eslint.config.js` - ESLint配置
   - `.prettierrc` - Prettier格式化配置
   - `.gitignore` - Git忽略文件
   - `src/routes/+layout.ts` - 路由配置

3. **创建缺失的store文件**
   - `src/lib/stores/theme.ts` - 主题管理
   - `src/lib/stores/breadcrumb.ts` - 面包屑导航
   - `src/lib/stores/filter.ts` - 过滤器状态
   - `src/lib/stores/video-source.ts` - 视频源管理
   - `src/lib/stores/index.ts` - Store导出

## 重启服务

修复完成后，请重启前端服务：

```bash
# 停止当前运行的服务（Ctrl+C）
# 然后重新启动
cd web
npm run dev
```

## 验证修复

1. 访问 http://localhost:5173
2. 页面应该正常加载，不再出现500错误
3. 检查浏览器控制台是否有其他错误

## 注意事项

- 确保Flask后端服务正在运行（端口8000）
- 如果仍有问题，检查浏览器控制台的具体错误信息
- 可以尝试清除浏览器缓存和.svelte-kit目录